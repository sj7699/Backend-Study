# JVM 밑바닥까지 파헤치기 2-1 메모리 관리



## 런타임영역

Java Application이 실행할때 사용하는 메모리 공간


### 메서드 영역

- 모든 Thread가 공유하는 영역
- 런타임 상수 풀, 멤버 변수, static 변수, final 변수, 생성자, 메소드, Class Metadata 등등이 저장된다
- JVM 구현방식에 따라 JIT 컴파일된 코드가 추가 될 수 있다
- 메모리에 연속될 필요 없다
- Java Application 시작부터 종료까지 메모리에 남아있음
- 따라서 무분별하게 메서드 영역을 사용할 경우 OutOfMemory 에러

### 힙 영역

- 메서드 영역과 마찬가지로 모든 Thread가 공유하는 영역
- 참조형 데이터 타입을 가지는 객체들이 저장됨 (new를 통해 생성되는 객체들)
- GC의 관리 대상이 되는 영역 (Heap 메모리에 있는 인스턴스가 참조되지 않는다면 GC의 대상에 포함)
- 힙 영역이 가득차 확장하려고 하는데 힙 영역에 할당할 메모리가 부족하게 된다면 새로운 객체를 할당하지 못하고 OutOfMemory 에러
- TLAB

### 스택 영역

- 메소드가 실행될 당시에 사용되는 데이터들이 저장되는 메모리 영역
- 지역변수, 파라미터, 리턴주소가 저장됨
- 각 Thread마다 스택영역을 가지고 있어 메소드 호출 당시에 사용됐던 정보들을 저장하게 됨
- 스택영역에 새로운 스택 프레임 (메소드 호출 당시 생성되는 메모리 구조) 생성할때 스택영역에 공간이 없다면 StackOverflowError

###  PC 레지스터

- Thread마다 고유하게 가지고 있음
- 특정 Thread가 마지막으로 실행하고 있던 바이트코드 명령어의 주소
- 네이티브 메소드 실행시에는 undefined
